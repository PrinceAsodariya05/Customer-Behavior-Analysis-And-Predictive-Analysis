<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FreshMart SuperStore - Customer Peak Time Analytics</title>
    <link rel="stylesheet" href="style.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.18.5/xlsx.full.min.js"></script>
</head>
<body data-theme="bright">
    <!-- Enhanced Header -->
    <header class="header">
        <div class="header__container">
            <div class="header__brand">
                <div class="brand-logo">
                    <span class="brand-icon">üõí</span>
                    <div class="brand-text">
                        <h1>FreshMart SuperStore</h1>
                        <span class="header__subtitle">Customer Peak Time Analytics</span>
                    </div>
                </div>
            </div>
            <div class="header__controls">
                
                <div class="db-status" id="dbStatus">
                    <span class="status-indicator"></span>
                    <span>No Data Connected</span>
                </div>
            </div>
        </div>
    </header>

    <!-- Main Container -->
    <div class="main-container">
        <!-- Enhanced Sidebar -->
        <nav class="sidebar">
            <div class="sidebar__header">
                <div class="sidebar__user">
                    <div class="user-avatar">üë§</div>
                    <div class="user-info">
                        <span class="user-name">Store Manager</span>
                        <span class="user-role">FreshMart Mumbai</span>
                    </div>
                </div>
            </div>
            <ul class="sidebar__menu">
                <li><a href="#" class="sidebar__link active" data-section="dashboard">
                    <span class="sidebar__icon">üìä</span>
                    <span class="sidebar__text">Dashboard</span>
                    <span class="sidebar__badge">Live</span>
                </a></li>
                <li><a href="#" class="sidebar__link" data-section="database">
                    <span class="sidebar__icon">üíæ</span>
                    <span class="sidebar__text">Import Data</span>
                </a></li>
                <li><a href="#" class="sidebar__link" data-section="customer-analytics">
                    <span class="sidebar__icon">üë•</span>
                    <span class="sidebar__text">Customer Analytics</span>
                </a></li>
                <li><a href="#" class="sidebar__link" data-section="sales-analytics">
                    <span class="sidebar__icon">üí∞</span>
                    <span class="sidebar__text">Sales Analytics</span>
                </a></li>
                <li><a href="#" class="sidebar__link" data-section="inventory-analytics">
                    <span class="sidebar__icon">üì¶</span>
                    <span class="sidebar__text">Inventory Analytics</span>
                </a></li>
                <li><a href="#" class="sidebar__link" data-section="operations">
                    <span class="sidebar__icon">üè™</span>
                    <span class="sidebar__text">Operations</span>
                </a></li>
            </ul>
        </nav>

        <!-- Main Content -->
        <main class="content">
            <!-- Dashboard Section -->
            <section class="section active" id="dashboard">
                <div class="section__header">
                    <div class="section__title">
                        <h2>Customer Analytics Dashboard</h2>
                        <p>Real-time insights into customer behavior and peak shopping times</p>
                    </div>
                    <div class="section__actions">
                        <div class="date-info">
                            üìÖ <span id="currentDate"></span>
                        </div>
                        <button class="btn btn--primary btn--sm" onclick="Utils.exportDashboard()">
                            <span>üì§</span> Export Report
                        </button>
                    </div>
                </div>

                <!-- Empty State -->
                <div class="empty-state" id="dashboardEmptyState">
                    <div class="empty-state__icon">üìä</div>
                    <h3>No Data Available</h3>
                    <p>Import customer data from Excel or connect to your database to start analyzing customer peak times</p>
                    <button class="btn btn--primary" onclick="UI.showSection('database')">
                        <span>üìÅ</span> Import Data
                    </button>
                </div>

                <!-- Data Loaded Content -->
                <div class="dashboard-content" id="dashboardContent" style="display: none;">
                    <!-- KPI Cards -->
                    <div class="kpi-grid">
                        <div class="kpi-card kpi-card--primary">
                            <div class="kpi-card__icon">
                                <span>üë•</span>
                            </div>
                            <div class="kpi-card__content">
                                <h3>Total Customers</h3>
                                <div class="kpi-card__value" id="totalCustomers">0</div>
                                <div class="kpi-card__change">
                                    <span class="trend-icon">üë§</span>
                                    <span>Unique visitors</span>
                                </div>
                            </div>
                        </div>
                        
                        <div class="kpi-card kpi-card--success">
                            <div class="kpi-card__icon">
                                <span>‚è∞</span>
                            </div>
                            <div class="kpi-card__content">
                                <h3>Peak Hour</h3>
                                <div class="kpi-card__value" id="peakHour">--</div>
                                <div class="kpi-card__change">
                                    <span class="trend-icon">üî•</span>
                                    <span>Busiest time</span>
                                </div>
                            </div>
                        </div>
                        
                        <div class="kpi-card kpi-card--warning">
                            <div class="kpi-card__icon">
                                <span>üìà</span>
                            </div>
                            <div class="kpi-card__content">
                                <h3>Peak Customers</h3>
                                <div class="kpi-card__value" id="peakCustomers">0</div>
                                <div class="kpi-card__change">
                                    <span class="trend-icon">‚≠ê</span>
                                    <span>Max hourly visits</span>
                                </div>
                            </div>
                        </div>
                        
                        
                    </div>

                    <!-- Customer Peak Time Chart - Main Feature -->
                    <div class="chart-section">
                        <div class="chart-container card card--featured">
                            <div class="card__header">
                                <div class="header-with-icon">
                                    <span class="header-icon">‚è∞</span>
                                    <h3>Customer Peak Time Analysis</h3>
                                </div>
                                <div class="chart-controls">
                                    <button class="btn btn--sm btn--outline" data-period="today">Today</button>
                                    <button class="btn btn--sm btn--primary" data-period="week">Week</button>
                                    <button class="btn btn--sm btn--outline" data-period="month">Month</button>
                                </div>
                            </div>
                            <div class="card__body">
                                <div style="position: relative; height: 400px;">
                                    <canvas id="customerPeakTimeChart"></canvas>
                                </div>
                                <div class="peak-insights">
                                    <div class="insight-item">
                                        <span class="insight-label">Peak Shopping Hour:</span>
                                        <span class="insight-value" id="peakShoppingHour">--</span>
                                    </div>
                                    <div class="insight-item">
                                        <span class="insight-label">Quiet Period:</span>
                                        <span class="insight-value" id="quietPeriod">--</span>
                                    </div>
                                    <div class="insight-item">
                                        <span class="insight-label">Weekend vs Weekday:</span>
                                        <span class="insight-value" id="weekendComparison">--</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Recent Customer Activity -->
                    <div class="customer-activity-section">
                        <div class="card">
                            <div class="card__header">
                                <h3>Recent Customer Activity</h3>
                                <div class="customer-count">
                                    <span id="activeCustomersCount">0</span> customers active
                                </div>
                            </div>
                            <div class="card__body">
                                <div class="customer-activity-list" id="recentCustomerActivity">
                                    <div class="no-activity">
                                        <span>No recent customer activity</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Import Data Section -->
            <section class="section" id="database">
                <div class="section__header">
                    <div class="section__title">
                        <h2>Import Customer Data</h2>
                        <p>Upload Excel files or connect to SQL database to analyze customer peak times</p>
                    </div>
                </div>

                <div class="import-options">
                    <div class="import-option card card--enhanced">
                        <div class="card__header">
                            <div class="header-with-icon">
                                <span class="header-icon">üìä</span>
                                <h3>Excel File Upload</h3>
                            </div>
                            <div class="status-badge success">Recommended</div>
                        </div>
                        <div class="card__body">
                            <div class="upload-area" id="uploadArea">
                                <div class="upload-content">
                                    <div class="upload-icon">üìÑ</div>
                                    <h4>Upload Customer & Transaction Data</h4>
                                    <p>Drag & drop Excel file or click to browse</p>
                                    <button class="btn btn--primary" id="browseBtn">
                                        <span>üìÅ</span> Browse Files
                                    </button>
                                </div>
                                <input type="file" id="fileInput" accept=".xlsx,.xls" hidden>
                            </div>
                            <div class="upload-requirements">
                                <h4>Required Excel Sheets:</h4>
                                <div class="requirement-list">
                                    <div class="requirement-item">
                                        <span class="requirement-icon">‚úÖ</span>
                                        <div class="requirement-details">
                                            <strong>Transactions Sheet</strong>
                                            <p>Must include: transaction_id, customer_name, timestamp, total, product_name</p>
                                        </div>
                                    </div>
                                    <div class="requirement-item">
                                        <span class="requirement-icon">‚úÖ</span>
                                        <div class="requirement-details">
                                            <strong>Customers Sheet (Optional)</strong>
                                            <p>Must include: customer_id, customer_name, phone, registration_date</p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="import-option card card--enhanced">
                        <div class="card__header">
                            <div class="header-with-icon">
                                <span class="header-icon">üóÑÔ∏è</span>
                                <h3>SQL Database Connection</h3>
                            </div>
                            <div class="status-badge info">Advanced</div>
                        </div>
                        <div class="card__body">
                            <form id="sqlForm" class="sql-form">
                                <div class="form-row">
                                    <div class="form-group">
                                        <label class="form-label">Database Type</label>
                                        <select class="form-control" id="dbType">
                                            <option value="mysql">MySQL</option>
                                            <option value="postgresql">PostgreSQL</option>
                                            <option value="sqlserver">SQL Server</option>
                                        </select>
                                    </div>
                                    <div class="form-group">
                                        <label class="form-label">Port</label>
                                        <input type="number" class="form-control" id="dbPort" placeholder="3306">
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label class="form-label">Host Address</label>
                                    <input type="text" class="form-control" id="dbHost" placeholder="localhost">
                                </div>
                                <div class="form-group">
                                    <label class="form-label">Database Name</label>
                                    <input type="text" class="form-control" id="dbName" placeholder="supermarket_db">
                                </div>
                                <div class="form-row">
                                    <div class="form-group">
                                        <label class="form-label">Username</label>
                                        <input type="text" class="form-control" id="dbUser" placeholder="username">
                                    </div>
                                    <div class="form-group">
                                        <label class="form-label">Password</label>
                                        <input type="password" class="form-control" id="dbPassword" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢">
                                    </div>
                                </div>
                                <div class="form-actions">
                                    <button type="button" class="btn btn--outline">Test Connection</button>
                                    <button type="submit" class="btn btn--primary">Connect Database</button>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Customer Analytics Section -->
            <section class="section" id="customer-analytics">
                <div class="section__header">
                    <div class="section__title">
                        <h2>Customer Behavior Analysis</h2>
                        <p>Deep insights into customer patterns and peak shopping times</p>
                    </div>
                </div>

                <!-- Empty State -->
                <div class="empty-state" id="customerAnalyticsEmpty">
                    <div class="empty-state__icon">üë•</div>
                    <h3>No Customer Data Available</h3>
                    <p>Import customer transaction data to analyze shopping patterns and peak times</p>
                    <button class="btn btn--primary" onclick="UI.showSection('database')">
                        <span>üìÅ</span> Import Customer Data
                    </button>
                </div>

                <!-- Data Loaded Content -->
                <div class="analytics-content" id="customerAnalyticsContent" style="display: none;">
                    <div class="analytics-grid">
                        <div class="card card--chart">
                            <div class="card__header">
                                <h3>Customer Visit Frequency</h3>
                            </div>
                            <div class="card__body">
                                <div style="position: relative; height: 250px;">
                                    <canvas id="visitFrequencyChart"></canvas>
                                </div>
                            </div>
                        </div>

                        <div class="card card--chart">
                            <div class="card__header">
                                <h3>Shopping Duration Analysis</h3>
                            </div>
                            <div class="card__body">
                                <div style="position: relative; height: 250px;">
                                    <canvas id="shoppingDurationChart"></canvas>
                                </div>
                            </div>
                        </div>

                        <div class="card card--customer-list">
                            <div class="card__header">
                                <h3>Top Customers by Visits</h3>
                                <div class="customer-total">
                                    <span id="totalCustomersCount">0</span> total customers
                                </div>
                            </div>
                            <div class="card__body">
                                <div class="customer-list" id="topCustomersList">
                                    <div class="no-customers">No customer data available</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Sales Analytics Section -->
            <section class="section" id="sales-analytics">
                <div class="section__header">
                    <div class="section__title">
                        <h2>Sales Analytics with Customer Names</h2>
                        <p>Revenue analysis with customer information</p>
                    </div>
                </div>

                <div class="empty-state" id="salesAnalyticsEmpty">
                    <div class="empty-state__icon">üí∞</div>
                    <h3>No Sales Data Available</h3>
                    <p>Import transaction data to analyze sales performance by customer</p>
                    <button class="btn btn--primary" onclick="UI.showSection('database')">
                        <span>üìÅ</span> Import Sales Data
                    </button>
                </div>

                <div class="analytics-content" id="salesAnalyticsContent" style="display: none;">
                    <div class="analytics-grid">
                        <div class="card">
                            <div class="card__header">
                                <h3>Recent Transactions</h3>
                            </div>
                            <div class="card__body">
                                <div class="transaction-list" id="recentTransactionsList">
                                    <div class="no-transactions">No transaction data available</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Inventory Analytics Section -->
            <section class="section" id="inventory-analytics">
                <div class="section__header">
                    <div class="section__title">
                        <h2>Customer-Driven Inventory Insights</h2>
                        <p>Product performance based on customer preferences</p>
                    </div>
                </div>

                <div class="empty-state" id="inventoryAnalyticsEmpty">
                    <div class="empty-state__icon">üì¶</div>
                    <h3>No Inventory Data Available</h3>
                    <p>Import product and transaction data to analyze customer-driven inventory insights</p>
                    <button class="btn btn--primary" onclick="UI.showSection('database')">
                        <span>üìÅ</span> Import Data
                    </button>
                </div>
            </section>

            <!-- Operations Section -->
            <section class="section" id="operations">
                <div class="section__header">
                    <div class="section__title">
                        <h2>Store Operations During Peak Hours</h2>
                        <p>Optimize operations based on customer peak times</p>
                    </div>
                </div>

                <div class="empty-state" id="operationsEmpty">
                    <div class="empty-state__icon">üè™</div>
                    <h3>No Operations Data Available</h3>
                    <p>Import staff and transaction data to analyze operational efficiency during peak customer hours</p>
                    <button class="btn btn--primary" onclick="UI.showSection('database')">
                        <span>üìÅ</span> Import Data
                    </button>
                </div>
            </section>
        </main>
    </div>

    <!-- Footer -->
    <footer class="footer">
        <div class="footer__content">
            <div class="footer__info">
                <p>&copy; 2024 FreshMart SuperStore - Customer Peak Time Analytics</p>
            </div>
            <div class="footer__version">
                <span class="version-badge">Version 3.0</span>
                <span class="status-badge" id="footerStatus">Ready</span>
            </div>
        </div>
    </footer>

    <script src="app.js"></script>
</body>
</html>